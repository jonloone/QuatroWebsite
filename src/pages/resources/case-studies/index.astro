---
import { getCollection } from 'astro:content'
import MarketingLayout from '@/layouts/MarketingLayout.astro'
import Hero from '@/components/marketing/Hero.astro'
import Section from '@/components/marketing/Section.astro'
import CtaBanner from '@/components/marketing/CtaBanner.astro'

const caseStudies = (await getCollection('case-studies')).sort((a, b) => (a.data.order ?? 99) - (b.data.order ?? 99))
---

<MarketingLayout
  title="Case Studies â€” Customer Success Stories"
  description="Read how operations leaders across industries have transformed their operations with Quatro."
>
  <Hero
    eyebrow="Case Studies"
    title="Real Results. Real Operations."
    description="See how operations leaders across energy, defense, industrial, and infrastructure have transformed their operations with Quatro."
    primaryCta={{ label: 'Schedule a Demo', href: '/contact/demo' }}
  />

  <Section>
    <div class="grid gap-8 lg:grid-cols-2">
      {caseStudies.map((caseStudy) => (
        <a
          href={`/resources/case-studies/${caseStudy.id.replace(/\.md$/, '')}`}
          class="group flex flex-col rounded-2xl border border-neutral-200 bg-white p-8 transition-all hover:border-brand-300 hover:shadow-lg"
        >
          <span class="inline-block w-fit rounded-full bg-brand-100 px-3 py-1 text-xs font-normal text-brand-700">
            {caseStudy.data.industryLabel}
          </span>
          <h3 class="mt-4 font-display text-xl font-bold text-neutral-800 group-hover:text-brand-600">
            {caseStudy.data.headline}
          </h3>
          <p class="mt-3 flex-1 text-sm text-neutral-600">{caseStudy.data.excerpt}</p>
          {caseStudy.data.stats && (
            <div class="mt-6 flex flex-wrap gap-4">
              {caseStudy.data.stats.slice(0, 3).map((stat) => (
                <div class="text-center">
                  <div class="font-display text-lg font-bold text-brand-500">{stat.value}</div>
                  <div class="text-xs text-neutral-500">{stat.label}</div>
                </div>
              ))}
            </div>
          )}
          <span class="mt-6 text-sm font-normal text-brand-500 group-hover:underline">
            Read the full story &rarr;
          </span>
        </a>
      ))}
    </div>
  </Section>

  <CtaBanner
    title="Ready to Write Your Success Story?"
    description="See how Quatro can transform your operations."
    primaryCta={{ label: 'Schedule a Demo', href: '/contact/demo' }}
    secondaryCta={{ label: 'Talk to Sales', href: '/contact/sales' }}
  />
</MarketingLayout>
