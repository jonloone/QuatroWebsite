---
import type { HTMLAttributes } from 'astro/types'

interface Props extends HTMLAttributes<'a'> {
  href?: string
  size?: 'md' | 'lg'
  color?: 'dark/light' | 'light' | 'dark'
  variant?: 'solid' | 'soft' | 'plain' | 'pill'
}

const { href, size = 'md', color = 'dark/light', variant = 'solid', class: className, ...props } = Astro.props

const sizes = {
  md: 'px-3 py-1',
  lg: 'px-4 py-2',
}

const baseClasses = 'inline-flex shrink-0 items-center justify-center gap-1 rounded-sm text-sm/7 font-medium'
const pillBaseClasses = 'inline-flex shrink-0 items-center justify-center gap-1 rounded-full font-mono text-xs uppercase tracking-[0.05em] transition-all duration-200'

const variantClasses = {
  solid: {
    'dark/light': 'bg-brand-500 text-white hover:bg-brand-600',
    light: 'bg-white text-neutral-800 hover:bg-neutral-100',
    dark: 'bg-neutral-900 text-white hover:bg-neutral-800',
  },
  soft: {
    'dark/light': 'bg-neutral-800/10 text-neutral-800 hover:bg-neutral-800/15',
    light: 'bg-white/10 text-white hover:bg-white/15',
    dark: 'bg-neutral-800/10 text-neutral-800 hover:bg-neutral-800/15',
  },
  plain: {
    'dark/light': 'text-neutral-800 hover:bg-neutral-800/10',
    light: 'text-white hover:bg-white/15',
    dark: 'text-neutral-800 hover:bg-neutral-800/10',
  },
  pill: {
    'dark/light': 'bg-brand-500 text-white hover:shadow-[0_0_40px_rgba(15,76,58,0.3)]',
    light: 'bg-white text-neutral-800 hover:shadow-[0_0_40px_rgba(15,76,58,0.3)]',
    dark: 'bg-neutral-900 text-white hover:shadow-[0_0_40px_rgba(15,76,58,0.3)]',
  },
}

const pillSizes = {
  md: 'px-6 py-3',
  lg: 'px-8 py-4',
}

const isPill = variant === 'pill'
const classes = [isPill ? pillBaseClasses : baseClasses, isPill ? pillSizes[size] : sizes[size], variantClasses[variant][color], className].filter(Boolean).join(' ')
---

{
  href ? (
    <a href={href} class={classes} {...props}>
      <slot />
    </a>
  ) : (
    <button class={classes} {...props}>
      <slot />
    </button>
  )
}
