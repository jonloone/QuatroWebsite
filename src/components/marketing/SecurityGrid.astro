---
import Container from '@/components/ui/Container.astro'
import ShieldCheckIcon from '@/components/icons/ShieldCheckIcon.astro'
import CogIcon from '@/components/icons/CogIcon.astro'
import GlobeAltIcon from '@/components/icons/GlobeAltIcon.astro'
import ChartBarIcon from '@/components/icons/ChartBarIcon.astro'
import LightBulbIcon from '@/components/icons/LightBulbIcon.astro'
import ShieldIcon from '@/components/icons/ShieldIcon.astro'

type IconType = 'soc2' | 'resilience' | 'gdpr' | 'enterprise' | 'multimodal' | 'quality'

interface SecurityFeature {
  icon: IconType
  name: string
  description: string
}

interface Props {
  eyebrow?: string
  heading: string
  features: SecurityFeature[]
  class?: string
}

const { eyebrow, heading, features, class: className } = Astro.props

const iconMap: Record<IconType, typeof ShieldCheckIcon> = {
  soc2: ShieldCheckIcon,
  resilience: CogIcon,
  gdpr: GlobeAltIcon,
  enterprise: ChartBarIcon,
  multimodal: LightBulbIcon,
  quality: ShieldIcon,
}
---

<section class:list={['py-16 sm:py-24', className]} style="background-color: var(--color-forest);">
  <Container>
    <!-- Header -->
    <div class="mb-12">
      {eyebrow && (
        <p class="font-mono text-[10px] uppercase tracking-[0.1em] text-white/60 mb-4">
          {eyebrow}
        </p>
      )}
      <h2 class="font-display text-3xl tracking-tight text-white sm:text-4xl lg:text-5xl">
        {heading}
      </h2>
    </div>

    <!-- 3-column grid -->
    <div class="reveal-stagger grid grid-cols-1 md:grid-cols-3 gap-4">
      {features.map((feature) => {
        const IconComponent = iconMap[feature.icon]
        return (
          <div class="reveal bg-white/10 p-6" style="border: 1px solid rgba(255,255,255,0.1);">
            <div class="w-10 h-10 bg-white/10 flex items-center justify-center mb-4">
              <IconComponent class="w-5 h-5 text-white" />
            </div>
            <h3 class="font-display text-lg font-semibold text-white mb-2">{feature.name}</h3>
            <p class="text-sm text-white/60">{feature.description}</p>
          </div>
        )
      })}
    </div>
  </Container>
</section>
