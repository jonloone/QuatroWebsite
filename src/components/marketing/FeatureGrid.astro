---
interface Feature {
  icon?: string
  name: string
  description?: string
  href?: string
  keywords?: string[]
}

interface Props {
  title?: string
  subtitle?: string
  features: Feature[]
  columns?: 2 | 3 | 4
  dark?: boolean
}

const { title, subtitle, features, columns = 3, dark = false } = Astro.props

const gridClasses = {
  2: 'sm:grid-cols-2',
  3: 'sm:grid-cols-2 lg:grid-cols-3',
  4: 'sm:grid-cols-2 lg:grid-cols-4',
}
---

<div>
  {(title || subtitle) && (
    <div class="mb-12 text-center">
      {title && (
        <h2 class:list={[
          'font-display text-2xl font-bold tracking-tight sm:text-3xl',
          dark ? 'text-white' : 'text-neutral-800'
        ]}>{title}</h2>
      )}
      {subtitle && (
        <p class:list={[
          'mt-4 text-lg',
          dark ? 'text-neutral-300' : 'text-neutral-600'
        ]}>{subtitle}</p>
      )}
    </div>
  )}
  <div class:list={['grid gap-8', gridClasses[columns]]}>
    {features.map((feature) => {
      const Tag = feature.href ? 'a' : 'div'
      const linkProps = feature.href
        ? { href: feature.href }
        : {}
      const baseClass = dark
        ? 'p-6'
        : 'p-6'
      const baseStyle = dark
        ? 'border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05);'
        : 'border: 1px solid rgba(226,232,240,1);'
      const linkClass = feature.href
        ? dark
          ? 'group p-6 transition hover:border-brand-500/40'
          : 'group p-6 transition hover:border-brand-500/30'
        : baseClass
      const linkStyle = feature.href
        ? dark
          ? 'border: 1px solid rgba(255,255,255,0.1); background: rgba(255,255,255,0.05);'
          : 'border: 1px solid rgba(226,232,240,1);'
        : baseStyle

      return (
        <Tag class={linkClass} style={linkStyle} {...linkProps}>
          <h3 class:list={[
            'text-base font-display font-semibold',
            dark ? 'text-white' : 'text-neutral-800'
          ]}>{feature.name}</h3>
          {feature.description && (
            <p class:list={[
              'mt-2 text-sm',
              dark ? 'text-neutral-400' : 'text-neutral-600'
            ]}>{feature.description}</p>
          )}
          {feature.keywords && feature.keywords.length > 0 && (
            <div class="mt-3 flex flex-wrap gap-1.5 opacity-0 transition-opacity group-hover:opacity-100">
              {feature.keywords.map((kw) => (
                <span class:list={[
                  'rounded-sm px-2 py-0.5 text-xs font-medium',
                  dark ? 'bg-brand-500/20 text-brand-400' : 'bg-brand-500/10 text-brand-600'
                ]}>
                  {kw}
                </span>
              ))}
            </div>
          )}
        </Tag>
      )
    })}
  </div>
</div>
